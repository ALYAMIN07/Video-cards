{% extends "base.html" %}

{% block title %}Все видеокарты{% endblock %}

{% block content %}
<div class="cards-header">
    {% if current_user.is_authenticated and current_user.is_admin() %}
    {% endif %}
</div>

<div class="cards-grid">
    {% for card in cards %}
    <div class="card-item">
        {% if card.image_url %}
        <img src="{{ card.image_url }}" alt="{{ card.name }}" class="card-image">
        {% else %}
        <div class="card-image placeholder">Нет изображения</div>
        {% endif %}

        <div class="card-info">
            <h3>{{ card.name }}</h3>
            <p class="manufacturer">{{ card.manufacturer }}</p>
            <p class="memory">{{ card.memory }} ГБ {{ card.memory_type }}</p>
            <p class="price">{{ card.price }} руб.</p>

            {% if card.description %}
            <p class="description">{{ card.description }}</p>
            {% endif %}

            <div class="card-status">
                {% if card.in_stock %}
                <span class="in-stock">В наличии</span>
                {% else %}
                <span class="out-of-stock">Нет в наличии</span>
                {% endif %}
            </div>

            {% if current_user.is_authenticated and current_user.is_admin() %}
      <div class="card-actions">
    <a href="{{ url_for('edit_card', card_id=card.id) }}" class="btn-edit" style="background: #1C1C1C; color: white; padding: 0.05rem 0.1rem; border: none; border-radius: 5px; text-decoration: none; display: inline-block;">Редактировать</a>
    <form action="{{ url_for('delete_card', card_id=card.id) }}" method="POST" class="delete-form">
        <button type="submit" class="btn-delete" style="background: #1C1C1C; color: white; padding: 0.2rem 0.5rem; border: none; border-radius: 5px;" onclick="return confirm('Вы уверены, что хотите удалить эту видеокарту?')">Удалить</button>
    </form>
</div>
            {% endif %}
        </div>
    </div>
    {% else %}
    <div class="no-cards">
        <p>Видеокарты не найдены.</p>
        {% if current_user.is_authenticated and current_user.is_admin() %}
            <a href="{{ url_for('add_card') }}" class="btn-primary">Добавить первую видеокарту</a>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% endblock %}